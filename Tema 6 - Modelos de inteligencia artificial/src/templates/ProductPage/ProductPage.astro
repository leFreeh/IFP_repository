---
import type { ProductPageProps } from "./productPage";

import BlogCard from "@blocks/BlogCard/BlogCard.astro";
import Layout from "@blocks/Layout/Layout.astro";
import Hero from "@blocks/Hero/Hero.astro";

import styles from "./product-page.module.scss";

import { Carousel } from "webcoreui/astro";

interface Props extends ProductPageProps {}

const { layout, images, carousel, buttons, features, recommended, hero, ...rest } =
	Astro.props;
---

<Layout {...layout} {...rest} className={styles.main}>
	{
		Astro.slots.has("menu") && (
			<div slot="menu">
				<slot name="menu" />
			</div>
		)
	}

	{
		images?.length && (
			<Carousel
				{...carousel}
				slot="atf"
				items={images.length}
				className={styles.container}
				wrapperClassName={styles.carousel}
			>
				{images.map((img) => (
					<li>
						<img
							src={img.src}
							alt={img.alt}
							width={img.width}
							height={img.height}
							loading={img.lazy ? "lazy" : undefined}
						/>
					</li>
				))}
			</Carousel>
		)
	}

	{hero && <Hero {...hero} />}

	<slot />

	{
		!!recommended?.items?.length && (
			<section slot="above-footer" class="container">
				<h2>{recommended.title || "Recommended"}</h2>
				<div class="grid sm-3">
					{recommended.items.map((item) => (
						<BlogCard {...item} />
					))}
				</div>
			</section>
		)
	}
</Layout>
